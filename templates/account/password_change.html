{% extends "base.html" %}
{% load allauth i18n widget_tweaks %}

{% block head_title %}
{% trans "Change Password" %}
{% endblock head_title %}

{% block content %}
<div class="min-h-screen flex items-center justify-center bg-gray-100 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full bg-white shadow-xl rounded-xl p-8 space-y-8 border border-gray-200">

        <!-- Header -->
        <div class="text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-3">
                {% trans "Change Password" %}
            </h2>
            <p class="mt-1 text-base text-gray-500">
                {% trans "Please enter your new password below." %}
            </p>
        </div>
        <!-- Form -->
        {% url 'account_change_password' as action_url %}
        {% element form form=form method="post" action=action_url %}
        {% slot body %}
        {% csrf_token %}
        {{ redirect_field }}

        <div class="space-y-5">
            {% element fields form=form %}
            {% for field in form %}
            <div class="allauth-field">
                <!-- Label -->
                <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                    {{ field.label }}
                </label>

                <!-- Input -->
                <div>
                    {% if field.field.widget.input_type == 'checkbox' %}
                    {{ field }}
                    {% else %}
                    {{ field|add_class:"block w-full px-4 py-3 text-base border border-gray-300 rounded-lg shadow-sm
                    placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                    }}
                    {% endif %}

                    <!-- Help Text -->
                    {% if field.help_text %}
                    <p class="mt-1 text-xs text-gray-400 leading-snug">
                        {{ field.help_text|safe }}
                    </p>
                    {% endif %}

                    <!-- Errors -->
                    {% for error in field.errors %}
                    <p class="mt-1 text-sm text-red-600">{{ error }}</p>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
            {% endelement %}
        </div>
        {% endslot %}

        {% slot actions %}
        <!-- Submit -->
        <div class="space-y-4 mt-6">
            <button type="submit"
                class="w-full flex justify-center py-3 px-4 rounded-lg shadow-sm text-base font-semibold text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                {% trans "Change Password" %}
            </button>

            <!-- Forgot password link -->
            <a href="{% url 'account_reset_password' %}"
                class="block text-center text-sm text-indigo-600 hover:text-indigo-500">
                {% trans "Forgot Password?" %}
            </a>
        </div>
        {% endslot %}
        {% endelement %}

        <!-- Back link -->
        <div class="mt-8 text-center">
            <a href="javascript:history.back()"
                class="inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-800">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                {% trans "Back" %}
            </a>
        </div>

    </div>
</div>
{% endblock content %}